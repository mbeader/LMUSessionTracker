@if(car) {
<dl class="row">
    <dt class="col-4 order-1">Total pits</dt>
    <dd class="col-4 order-2">{{ car.pits.length }}</dd>
    <dt class="col-4 order-1">Total stops</dt>
    <dd class="col-4 order-2">{{ getTotalStops() }}</dd>
    <dt class="col-4 order-1">Total swaps</dt>
    <dd class="col-4 order-2">{{ getTotalSwaps() }}</dd>
    <dt class="col-12 order-2">Total time stopped</dt>
    <dd class="col-12 order-2">{{ Format.time(getTotalTimeStopped()) }}</dd>
</dl>
<table class="table table-sm table-striped table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>Lap</th>
            <th>Entry ET</th>
            <th>Stop ET</th>
            <th>Swap ET</th>
            <th>Release ET</th>
            <th>Exit ET</th>
            <th>Garage in ET</th>
            <th>Garage out ET</th>
            <th class="text-end">Time</th>
            <th class="text-center" title="Box after S/F line">BAL</th>
            <th class="text-center" title="Stop location (swap location)">SLoc</th>
            <th class="text-center" title="Penalty">Pen</th>
        </tr>
    </thead>
    <tbody>
        @for(pit of car.pits; track i; let i = $index) {
        @let pitNum = getPitNumber(i);
        <tr>
            <td>{{ pitNum <= 0 ? '-' : pitNum }}</td>
            <td>{{ pit.lap }}</td>
            <td>{{ pit.pitTime <= 0 ? '-' : Format.time(pit.pitTime) }}</td>
            <td>{{ pit.stopTime <= 0 ? '-' : Format.time(pit.stopTime) }}</td>
            <td>{{ pit.swapTime <= 0 ? '-' : Format.time(pit.swapTime) }}</td>
            <td>{{ pit.releaseTime <= 0 ? '-' : Format.time(pit.releaseTime) }}</td>
            <td>{{ pit.exitTime <= 0 ? '-' : Format.time(pit.exitTime) }}</td>
            <td>{{ pit.garageInTime <= 0 ? '-' : Format.time(pit.garageInTime) }}</td>
            <td>{{ pit.garageOutTime <= 0 ? '-' : Format.time(pit.garageOutTime) }}</td>
            <td class="text-end">{{ pit.stopTime <= 0 || pit.releaseTime <= 0 ? '-' : Format.lapTime(pit.releaseTime - pit.stopTime) }}</td>
            <td class="text-center">{{ pit.stopAfterLine ? 'True' : '' }}</td>
            <td class="text-center">{{ pit.stopLocation < 0 ? '-' : pit.stopLocation == 0 ? 'Gar' : `S${pit.stopLocation}` }} ({{ pit.swapLocation < 0 ? '-' : pit.swapLocation == 0 ? 'Gar' : `S${pit.swapLocation}` }})</td>
            <td class="text-center">{{ pit.penalty ? 'True' : '' }}</td>
        </tr>
        } @empty {
        <tr>
            <td colspan="13" class="text-center">No pit stops have been made</td>
        </tr>
        }
    </tbody>
</table>
}
